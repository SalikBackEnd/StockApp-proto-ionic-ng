<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start" (click)="Dismiss()">
      <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
    </ion-buttons>
    <ion-title>Profit & Loss</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-grid fixed>
    <ion-row>
      <ion-col size="6">
        <!-- <app-scriptcombobox [sid]="resetscriptid" (scriptvalue)="receiveScriptid($event)"></app-scriptcombobox> -->
        <ion-item>
          <app-scriptselect [reset]="resetscript" (emitid)="receiveScriptid($event)" ></app-scriptselect>
        </ion-item>
      </ion-col>
      <ion-col size="6">
        <ion-button (click)="showAll()" expand="block" fill="clear" shape="round">
          All Records
        </ion-button>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="6">
        <ion-label class="from-Label">From</ion-label>
        <ion-datetime [(ngModel)]="fromDate" (ionChange)="onFromDate()" displayFormat="MMM DD YYYY"
          placeholder="Select Date" min="2020-01-01" [max]="maxDate"></ion-datetime>
      </ion-col>
      <ion-col size="6">
        <ion-label class="to-Label">To</ion-label>
        <ion-datetime [(ngModel)]="toDate" (ionChange)="onToDate()" displayFormat="MMM DD YYYY"
          placeholder="Select Date" [min]="minDate" [max]="maxDate"></ion-datetime>
      </ion-col>
    </ion-row>
  </ion-grid>



  <ion-list *ngIf="List.length > 0">
    <ion-card>
      <ion-item-group *ngFor="let i of List">
        <ion-item-divider>
          <ion-label>{{i.date}}</ion-label>
        </ion-item-divider>
        <ion-card>
          <ion-item color="primary">
            <ion-label>Script</ion-label>
            <ion-label>Buy Price</ion-label>
            <ion-label>Sell Price</ion-label>
            <ion-label>P/L</ion-label>
          </ion-item>
          <ion-item *ngFor="let j of i.Transactions">
            <ion-label>{{j.scriptsname}}</ion-label>
            <ion-label>{{j.buyprice}}</ion-label>
            <ion-label>{{j.sellprice}}</ion-label>
            <ion-label *ngIf="j.state == 1">{{j.PnL}}</ion-label>
            <ion-label *ngIf="j.state == 2" color="danger">( {{j.PnL}} )</ion-label>
          </ion-item>
        </ion-card>
        <ion-card>
          <ion-item color="secondary" *ngIf="i.Payouts.length > 0">
            <ion-label>Script</ion-label>
            <ion-label>Payout</ion-label>
            <ion-label>Percent</ion-label>
            <ion-label>You Get</ion-label>
          </ion-item>
          <ion-item *ngFor="let p of i.Payouts">
            <ion-label>{{p.scriptsname}}</ion-label>
            <ion-label>{{p.typename}}</ion-label>
            <ion-label>{{p.percent}}</ion-label>
            <ion-label>{{p.amount}}</ion-label>
          </ion-item>
        </ion-card>
      </ion-item-group>
    </ion-card>
  </ion-list>
  <ion-card *ngIf="List == 0">
    <ion-grid  fixed>
      <ion-row>
        <ion-col size="12" class="ion-text-center">
            <img src="assets\icon\nothing-found-96.png" class=""/>
        </ion-col>
        <ion-col size="12" class="ion-text-center">
          <ion-label color="secondary" >Not Found!</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
  
  <ion-fab vertical="top" horizontal="end" edge slot="fixed">
    <ion-fab-button (click)="OpenDemoPL()">
      <ion-icon name="calculator-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>